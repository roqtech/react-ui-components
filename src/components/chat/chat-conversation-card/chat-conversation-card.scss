@import "../../../styles/styles.scss";

$chat-conversation-font-card-line-height: $default-font-line-height;

$chat-conversation-hover-color: rgba(var(--rc-color-primary-rgb), 1);

:root {
  --rc-chat-conversation-card-border-radius: var(--rc-border-radius);

  --rc-chat-conversation-card-position: relative;
  --rc-chat-conversation-card-cursor: pointer;
  --rc-chat-conversation-card-padding: calc(var(--rc-step) * 2)
    calc(var(--rc-step) / 2) calc(var(--rc-step) * 2) calc(var(--rc-step) * 1.5);

  --rc-chat-conversation-card-background: var(--rc-color-white);
  --rc-chat-conversation-card-shadow: none;
  --rc-chat-conversation-card-border: none;

  --rc-chat-conversation-card-hover-background: #{$chat-conversation-hover-color};
  --rc-chat-conversation-card-hover-border: var(
    --rc-chat-conversation-card-border
  );
  --rc-chat-conversation-card-hover-shadow: var(
    --rc-chat-conversation-card-shadow
  );

  --rc-chat-conversation-card-active-background: var(--rc-color-primary);
  --rc-chat-conversation-card-active-border: var(
    --rc-chat-conversation-card-border
  );
  --rc-chat-conversation-card-active-shadow: none;

  --rc-chat-conversation-card-selected-background: var(
    --rc-chat-conversation-card-active-background
  );
  --rc-chat-conversation-card-selected-border: var(
    --rc-chat-conversation-card-active-border
  );

  --rc-chat-conversation-card-selected-border-left: none;
  --rc-chat-conversation-card-selected-border-right: none;
  --rc-chat-conversation-card-selected-border-top: none;
  --rc-chat-conversation-card-selected-border-bottom: none;

  --rc-chat-conversation-card-selected-shadow: var(
    --rc-chat-conversation-card-active-shadow
  );

  --rc-chat-conversation-card-selected-hover-background: var(
    --rc-chat-conversation-card-selected-background
  );
  --rc-chat-conversation-card-selected-hover-border: var(
    --rc-chat-conversation-card-selected-border
  );
  --rc-chat-conversation-card-selected-hover-shadow: var(
    --rc-chat-conversation-card-selected-shadow
  );

  --rc-chat-conversation-card-highlight-radius: 8px;
  --rc-chat-conversation-card-highlight-width: 4px;
  --rc-chat-conversation-card-highlight-background: var(
    --rc-chat-conversation-card-active-background
  );

  --rc-chat-conversation-card-inner-display: flex;

  --rc-chat-conversation-card-inner-avatars-margin: 0
    calc(var(--rc-step) * 1.25) 0 0;

  --rc-chat-conversation-card-inner-info-flex: 1;
  --rc-chat-conversation-card-inner-info-align-items: flex-start;
  --rc-chat-conversation-card-inner-info-justify-content: flex-start;
  --rc-chat-conversation-card-inner-info-display: flex;
  --rc-chat-conversation-card-inner-info-flex-direction: column;
  --rc-chat-conversation-card-inner-info-padding: var(--rc-step) 0px 0px 0px;

  --rc-chat-conversation-card-inner-info-title-font-weight: var(
    --rc-font-weight-bolder
  );
  --rc-chat-conversation-card-inner-info-title-font-size: 14px;
  --rc-chat-conversation-card-inner-info-title-line-height: 17px;
  --rc-chat-conversation-card-inner-info-title-color: var(--rc-color-RB-90);
  --rc-chat-conversation-card-inner-info-title-margin: 0px;

  --rc-chat-conversation-card-inner-info-message-font-weight: var(
    --rc-font-weight-normal
  );
  --rc-chat-conversation-card-inner-info-message-font-size: 13px;
  --rc-chat-conversation-card-inner-info-message-line-height: 18px;
  --rc-chat-conversation-card-inner-info-message-color: var(--rc-color-text);
  --rc-chat-conversation-card-inner-info-message-margin: calc(
      var(--rc-step) * 0.25
    )
    0 0 0;

  --rc-chat-conversation-card-inner-info-timestamp-font-weight: var(
    --rc-font-weight-medium
  );
  --rc-chat-conversation-card-inner-info-timestamp-font-size: 11px;
  --rc-chat-conversation-card-inner-info-timestamp-line-height: 13px;
  --rc-chat-conversation-card-inner-info-timestamp-color: var(--rc-color-RB-70);
  --rc-chat-conversation-card-inner-info-timestamp-margin: calc(
      var(--rc-step) * 1.5
    )
    0 0 0;

  --rc-chat-conversation-card-actions-min-width: calc(var(--rc-step) * 2.5);

  --rc-chat-conversation-card-actions-unread-width: 25px;
  --rc-chat-conversation-card-actions-unread-height: 25px;
  --rc-chat-conversation-card-actions-unread-count-background: var(
    --rc-color-red
  );
  --rc-chat-conversation-card-actions-unread-count-color: var(--rc-color-white);
  --rc-chat-conversation-card-actions-unread-count-radius: 50%;

  --rc-chat-conversation-card-message-line-height: var(
    #{$chat-conversation-font-card-line-height}
  );

  --rc-chat-conversation-card-message-unread-font-weight: var(
    --rc-font-weight-bolder
  );
  --rc-chat-conversation-card-message-unread-color: var(--rc-color-primary);

  --rc-chat-conversation-card-unread-border-top: none;
  --rc-chat-conversation-card-unread-border-left: 4px solid
    var(--rc-chat-conversation-card-active-background);
  --rc-chat-conversation-card-unread-border-bottom: none;
  --rc-chat-conversation-card-unread-border-right: none;

  --rc-chat-conversation-card-hover-inner-info-title-color: var(
    --rc-color-white
  );
  --rc-chat-conversation-card-hover-inner-info-message-color: rgba(
    var(--rc-color-white-rgb),
    0.8
  );
  --rc-chat-conversation-card-hover-inner-info-timestamp-color: var(
    --rc-color-white
  );

  --rc-chat-conversation-card-action-color: var(--rc-color-text);
  --rc-chat-conversation-card-selected-action-color: var(--rc-color-white);
  --rc-chat-conversation-card-hover-action-color: var(--rc-color-white);
}

@include roq-component("chat-conversation-card") {
  $container: &;

  position: var(--rc-chat-conversation-card-position);
  padding: var(--rc-chat-conversation-card-padding);
  background: var(--rc-chat-conversation-card-background);
  border: var(--rc-chat-conversation-card-border);
  border-radius: var(--rc-chat-conversation-card-border-radius);
  box-shadow: var(--rc-chat-conversation-card-shadow);
  overflow: var(--rc-chat-conversation-overflow);
  cursor: var(--rc-chat-conversation-card-cursor);

  &:hover {
    background: var(--rc-chat-conversation-card-hover-background);
    box-shadow: var(--rc-chat-conversation-card-hover-shadow);
    border: var(--rc-chat-conversation-card-hover-border);
  }

  &:focus {
    background: var(--rc-chat-conversation-card-active-background);
    box-shadow: var(--rc-chat-conversation-card-active-shadow);
    border: var(--rc-chat-conversation-card-active-border);
  }

  &--selected {
    background: var(--rc-chat-conversation-card-selected-background);
    box-shadow: var(--rc-chat-conversation-card-selected-shadow);

    border-left: var(--rc-chat-conversation-card-selected-border-left);
    border-right: var(--rc-chat-conversation-card-selected-border-right);
    border-top: var(--rc-chat-conversation-card-selected-border-top);
    border-bottom: var(--rc-chat-conversation-card-selected-border-bottom);

    &:hover {
      border: var(--rc-chat-conversation-card-selected-hover-border);
      background: var(--rc-chat-conversation-card-selected-hover-background);
      box-shadow: var(--rc-chat-conversation-card-selected-hover-shadow);
    }
  }

  &__highlight {
    visibility: hidden;
    width: 8px;

    content: "";
    position: absolute;
    left: 0px;
    top: 0px;
    bottom: 0px;
    pointer-events: none;
    border-radius: var(--rc-chat-conversation-card-highlight-radius);
    width: var(--rc-chat-conversation-card-highlight-radius);
    border-top-right-radius: 0px;
    border-bottom-right-radius: 0px;
    background: transparent;
    overflow: hidden;

    &::before {
      content: "";
      width: 4px;
      height: 100%;
      display: inline-block;
      background: var(--rc-chat-conversation-card-highlight-background);
    }
  }

  &__inner {
    display: var(--rc-chat-conversation-card-inner-display);

    &__avatars {
      margin: var(--rc-chat-conversation-card-inner-avatars-margin);
    }

    &__info {
      flex: var(--rc-chat-conversation-card-inner-info-flex);
      align-items: var(--rc-chat-conversation-card-inner-info-align-items);
      justify-content: var(
        --rc-chat-conversation-card-inner-info-justify-content
      );
      display: var(--rc-chat-conversation-card-inner-info-display);
      flex-direction: var(
        --rc-chat-conversation-card-inner-info-flex-direction
      );
      padding: var(--rc-chat-conversation-card-inner-info-padding);

      &__title {
        font-weight: var(
          --rc-chat-conversation-card-inner-info-title-font-weight
        );
        font-size: var(--rc-chat-conversation-card-inner-info-title-font-size);
        line-height: var(
          --rc-chat-conversation-card-inner-info-title-line-height
        );
        color: var(--rc-chat-conversation-card-inner-info-title-color);
        margin: var(--rc-chat-conversation-card-inner-info-title-margin);
      }

      &__message {
        font-weight: var(
          --rc-chat-conversation-card-inner-info-message-font-weight
        );
        font-size: var(
          --rc-chat-conversation-card-inner-info-message-font-size
        );
        line-height: var(
          --rc-chat-conversation-card-inner-info-message-line-height
        );
        color: var(--rc-chat-conversation-card-inner-info-message-color);
        margin: var(--rc-chat-conversation-card-inner-info-message-margin);

        & > *,
        & > *::after,
        & > *::before {
          margin: 0px;
          font-size: inherit;
        }
      }

      &__timestamp {
        font-weight: var(
          --rc-chat-conversation-card-inner-info-timestamp-font-weight
        );
        font-size: var(
          --rc-chat-conversation-card-inner-info-timestamp-font-size
        );
        line-height: var(
          --rc-chat-conversation-card-inner-info-timestamp-line-height
        );
        color: var(--rc-chat-conversation-card-inner-info-timestamp-color);
        margin: var(--rc-chat-conversation-card-inner-info-timestamp-margin);
      }
    }

    &__actions {
      flex-shrink: 0;
      padding-top: 2px;

      min-width: var(--rc-chat-conversation-card-actions-min-width);

      &__unread {
        position: absolute;
        width: var(--rc-chat-conversation-card-actions-unread-width);
        height: var(--rc-chat-conversation-card-actions-unread-height);

        right: 13px;
        bottom: 19px;

        &__count {
          text-align: center;
          font-size: 10px;
          line-height: calc(
            var(--rc-chat-conversation-card-actions-unread-height) - 3px
          );

          width: 100%;
          height: 100%;
          background: var(
            --rc-chat-conversation-card-actions-unread-count-background
          );
          color: var(--rc-chat-conversation-card-actions-unread-count-color);
          border-radius: var(
            --rc-chat-conversation-card-actions-unread-count-radius
          );
          transform: translate3d(0, 0, 0);
        }
      }
    }
  }

  &__message {
    min-width: 0px;
    max-width: 100%;
    flex: 1 1 100%;
    margin: 0px;
    padding: 0px;

    margin-top: var(--rc-chat-conversation-card-message-margin);
    color: var(--rc-chat-conversation-card-message-color);
    font-size: var(--rc-chat-conversation-card-message-font-size);
    font-weight: var(--rc-chat-conversation-card-message-font-weight);
    line-height: var(--rc-chat-conversation-card-message-line-height);

    @include line-clamp(2, $chat-conversation-font-card-line-height);
  }

  &--unread {
    #{$container} {
      &__highlight {
        visibility: visible;
      }

      &__inner {
        &__info {
          &__message {
            font-family: "Urbanist";
            font-style: normal;
            font-weight: 700;
            font-size: 13px;
            line-height: 18px;
            /* identical to box height, or 138% */

            color: #207be5;
          }
        }
      }

      &__message {
        color: var(--rc-chat-conversation-card-message-unread-color);
        font-weight: var(
          --rc-chat-conversation-card-message-unread-font-weight
        );
      }
    }
  }

  --roq-action-button-icon-color: var(--rc-chat-conversation-card-action-color);

  &--selected,
  &:hover {
    --roq-action-button-icon-color: var(
      --rc-chat-conversation-card-selected-action-color
    );

    #{$container} {
      &__inner {
        &__info {
          &__title {
            color: #ffffff;
            color: var(
              --rc-chat-conversation-card-hover-inner-info-title-color
            );
          }
          &__message {
            color: rgba(255, 255, 255, 0.8);
            color: var(
              --rc-chat-conversation-card-hover-inner-info-message-color
            );
          }
          &__timestamp {
            color: #ffffff;
            color: var(
              --rc-chat-conversation-card-hover-inner-info-timestamp-color
            );
          }
        }
      }
    }
  }
}
